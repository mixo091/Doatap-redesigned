<!DOCTYPE html>
<html>

<head>
  <%- include ('../partials/header.ejs') %>
    <script src="js/nav-script.js"></script>
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <!-- <link rel="stylesheet" href="/css/request.css"> -->
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <%- include ('../partials/nav-bar.ejs') %>
    <%- include ('../partials/breadcrumbs.ejs') %>

      <form action="/user-menu/request?_method=POST" method="post" class="form">
        <!-- <h1 class="text-center">Registration Form</h1> -->
        <!-- Progress bar -->
        <div class="progressbar">
          <div class="progress" id="progress"></div>

          <!-- <div class="progress-step progress-step-active" data-title="Τίτλος σπουδών"></div> -->
          <div class="progress-step rogress-step-active" data-title="Συνεκτίμηση τίτλου"></div>
          <div class="progress-step" data-title="Επισύναψη αρχείων"></div>
        </div>

        <!-- Steps -->
        <!-- <div class="form-step form-step-active">
          <div class="input-group">
            <div class="col-md-6">
              <label for="inputAddress" class="form-label">Χώρα Γέννησης</label>
              <input type="text" name="country" class="form-control" id="country" placeholder="Χώρα διαμονής">
            </div>
            <div class="col-md-6">
              <label for="inputAddress" class="form-label">Ημ. Γέννησης</label>
              <input type="date" name="date-birth" class="form-control" id="date-birth">
            </div>
            <div class="col-md-6">
              <label for="inputAddress" class="form-label">Αρ. Ταυτότητας</label>
              <input type="text" name="id-num" class="form-control" id="id-num">
            </div>
            <div class="col-md-6">
              <label for="inputAddress2" class="form-label">Ημ. Έκδοσης</label>
              <input type="date" name="id-date" class="form-control" id="id-date">
            </div>
            <div class="col-md-6">
              <label for="inputAddress" class="form-label">Πόλη</label>
              <input type="text" name="city" class="form-control" id="city">
            </div>
            <div class="col-md-6">
              <label for="inputAddress2" class="form-label">Δ/νση Κατοικίας</label>
              <input type="text" name="address" class="form-control" id="address">
            </div>
          </div>
          <div class="">
            <a href="#" class="btn btn-next width-50 ml-auto">Next</a>
            <div class="col-12">
              <button class="btn btn-primary" id="temp-save">Προσωρινή αποθήκευση</button>
            </div>
            <div class="col-10">
              <button type="submit" id="final-submit" class="btn-warning btn-primary">Οριστική Υποβολή</button>
            </div>
          </div>
        </div> -->
        
        <div class="form-step form-step-active">
          <div class="input-group">
              <label for="inputAddress2" class="form-label">Χώρα Σπουδών</label>
              <input type="text" name="country" class="form-control" id="country" placeholder="Χώρα">
          </div>
          <div class="input-group">
              <label for="inputAddress2" class="form-label">Πανεπιστήμιο</label>
              <input type="text" name="university" class="form-control" id="university" placeholder="Πανεμιστήμιο φοίτησης">
          </div>
          <div class="input-group">
              <label for="inputAddress2" class="form-label">Σχολή</label>
              <input type="text" name="department" class="form-control" id="department" placeholder="Σχολή φοίτησης">
          </div>
          <div class="input-group">
              <label for="inputAddress2" class="form-label">Τίτλος Σπουδών</label>
              <input type="text" name="title" class="form-control" id="title">
          </div>
          <div class="input-group">
              <label for="inputAddress2" class="form-label">Πιστωτικές Μονάδες</label>
              <input type="text" name="ects" class="form-control" id="ects">
          </div>
          <div class="input-group">
              <label for="inputAddress2" class="form-label">Διάρκεια Σπουδών</label>
              <input type="text" name="duration" class="form-control" id="duration" placeholder="Έτη">
          </div>
        <hr>      
          <div class="btns-group">
            <a href="#" class="btn btn-next">Next</a>
            <div class="col-12">
              <button class="btn btn-primary" id="temp-save">Προσωρινή αποθήκευση</button>
            </div>
            <div class="col-10">
              <button type="submit" id="final-submit" class="btn-warning btn-primary">Οριστική Υποβολή</button>
            </div>
          </div>
        </div>
        <div class="form-step">
          <div class="col-12">
            <label for="inputEmail4" class="form-label">ΠΑΡΑΒΟΛΟ</label>
            <input type="file" id="parabolo" name="parabolo" accept="image/*" />
          </div>
          <div class="col-12">
            <label for="inputEmail4" class="form-label">ΤΑΥΤΟΤΗΤΑ</label>
            <input type="file" id="passport" name="id" accept="image/*" />
          </div>
          <div class="col-12">
            <label for="inputEmail4" class="form-label">ΠΤΥΧΙΟ</label>
            <input type="file" id="ptyxio" name="diploma" accept="image/*" />
          </div>

          <div class="btns-group">
            <a href="#" class="btn btn-prev">Previous</a>
            <div class="col-12">
              <button class="btn btn-primary" id="temp-save">Προσωρινή αποθήκευση</button>
            </div>
            <div class="col-10">
              <button type="submit" id="final-submit" class="btn-warning btn-primary">Οριστική Υποβολή</button>
            </div>
          </div>
        </div>
      </form>

      <%- include ('../partials/footer.ejs') %>

        <script>
          const prevBtns = document.querySelectorAll(".btn-prev");
          const nextBtns = document.querySelectorAll(".btn-next");
          const progress = document.getElementById("progress");
          const formSteps = document.querySelectorAll(".form-step");
          const progressSteps = document.querySelectorAll(".progress-step");

          let formStepsNum = 0;

          nextBtns.forEach((btn) => {
            btn.addEventListener("click", () => {
              formStepsNum++;
              updateFormSteps();
              updateProgressbar();
            });
          });

          prevBtns.forEach((btn) => {
            btn.addEventListener("click", () => {
              formStepsNum--;
              updateFormSteps();
              updateProgressbar();
            });
          });

          function updateFormSteps() {
            formSteps.forEach((formStep) => {
              formStep.classList.contains("form-step-active") &&
                formStep.classList.remove("form-step-active");
            });

            formSteps[formStepsNum].classList.add("form-step-active");
          }

          function updateProgressbar() {
            progressSteps.forEach((progressStep, idx) => {
              if (idx < formStepsNum + 1) {
                progressStep.classList.add("progress-step-active");
              } else {
                progressStep.classList.remove("progress-step-active");
              }
            });

            const progressActive = document.querySelectorAll(".progress-step-active");

            progress.style.width =
              ((progressActive.length - 1) / (progressSteps.length - 1)) * 100 + "%";
          }

          // temp save with localStorage
          let request = {
            country: "",
            university: "",
            department: "",
            title: "",
            ects: "",
            duration: ""
          }

          const countryId = document.getElementById("country")
          const universityId = document.getElementById("university")
          const departmentId = document.getElementById("department")
          const titleId = document.getElementById("title")
          const ectsId = document.getElementById("ects")
          const durationId  = document.getElementById("duration")

          const tempSave = document.getElementById("temp-save")

          tempSave.onclick = function () {
            event.preventDefault()

            const countryValue = countryId.value;
            const universityValue = universityId.value;
            const departmentValue = departmentId.value;
            const titleValue = titleId.value;
            const ectsValue = ectsId.value;
            const durationValue = durationId.value;

            request.country = countryValue
            request.university = universityValue
            request.department = departmentValue
            request.title = titleValue
            request.ects = ectsValue
            request.duration = durationValue
            
            localStorage.setItem('request', JSON.stringify(request))
          };

          window.onload = function () {

            let profile = localStorage.getItem('request')
            let profileObj = JSON.parse(profile)

            console.log(profileObj)

            if (profileObj.country != "") $('#country').val(profileObj.country);
            if (profileObj.university != "") $('#university').val(profileObj.university);
            if (profileObj.department != "") $('#department').val(profileObj.department);
            if (profileObj.title != "") $('#title').val(profileObj.title);
            if (profileObj.ects != "") $('#ects').val(profileObj.ects);
            if (profileObj.duration != "") $('#duration').val(profileObj.duration);

            // let upload = localStorage.getItem('fileUpload')
            // let fileUploadObj = JSON.parse(upload)
            // console.log(fileUploadObj)

            // if (fileUploadObj.parabolo != "") $('#parabolo').val(fileUploadObj.parabolo);
            // if (fileUploadObj.passport != "") $('#passport').val(fileUploadObj.passport);
            // if (fileUploadObj.ptyxio != "") $('#ptyxio').val(fileUploadObj.ptyxio);
          }

        </script>
</body>

</html>

<!-- <div class="wrapper">
        <div class="tabs">
          <ul>
            <li class="active">
              <span class="icon">
                <i class="bi bi-info-circle"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="blue" class="bi bi-info-circle"
                  viewBox="0 0 16 16">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                  <path
                    d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                </svg>
              </span>
              <span class="text">Προφίλ</span>
            </li>
            <li>
              <span class="icon">
                <i class="bi bi-book"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-book"
                  viewBox="0 0 16 16">
                  <path
                    d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z" />
                </svg>
              </span>
              <span class="text">Αντιστοιχία τίτλου</span>
            </li>
            <li>
              <span class="icon">
                <i class="bi bi-upload"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-upload"
                  viewBox="0 0 16 16">
                  <path
                    d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
                  <path
                    d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z" />
                </svg>
              </span>
              <span class="text">Επισύναψη αρχείων</span>
            </li>
          </ul>
        </div>

        <div class="content">
          <div class="tab_wrap" style="display: block;">
            <div class="title">Συμπλήρωση στοιχείων</div>
            <div class="tab_content">

              <form action="/user-menu/request?_method=POST" id="my-form" method="POST" class="row g-3">
 
                <div class="col-md-6">
                  <label for="inputEmail4" class="form-label">Χώρα</label>
                  <input type="text" name="country" class="form-control" id="country" placeholder="Χώρα διαμονής">
                </div>
                <div class="col-md-6">
                  <label for="inputPassword4" class="form-label">Πανεπιστήμια</label>
                  <input type="text" name="university" class="form-control" id="univ"
                    placeholder="Πανεπιστήμιο φοίτησης">
                </div>
                <div class="col-12">
                  <label for="inputAddress" class="form-label">Τίτλος Πτυχίου</label>
                  <input type="text" name="certificate" class="form-control" id="degree">
                </div>
                <div class="col-12">
                  <label for="inputAddress2" class="form-label">Αναγνώριση Τίτλου</label>
                  <input type="text" name="recognition" class="form-control" id="title">
                </div>
                <div class="col-12">
                  <button class="btn btn-primary" id="temp-save">Προσωρινή αποθήκευση</button>
                </div>
                <div class="col-10">
                  <button type="submit" class="btn-warning btn-primary">Οριστική Υποβολή</button>
                </div>
              </form>
            </div>
          </div>
          <div class="tab_wrap" style="display: none;">
            <div class="title">SMS</div>
            <div class="tab_content">
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quidem inventore perspiciatis alias, magni
                provident nulla recusandae odio consequatur praesentium officia non voluptate voluptatum debitis
                consequuntur omnis incidunt fuga eaque sit aliquam nemo. Recusandae voluptatibus excepturi, voluptates
                inventore nulla aliquid porro a asperiores beatae quas quo incidunt at, cumque minima officiis error
                eius dignissimos animi ullam unde odit! Nobis aut animi quibusdam molestias libero, facere vel cum
                atque incidunt esse! Libero ipsam praesentium sit, enim corrupti quia nobis obcaecati nostrum
                voluptatem totam nulla delectus ipsa facilis optio quis iure unde repudiandae voluptas temporibus, ad
                veritatis dolorem, culpa maiores. Dicta, quod neque.</p>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quidem inventore perspiciatis alias, magni
                provident nulla recusandae odio consequatur praesentium officia non voluptate voluptatum debitis
                consequuntur omnis incidunt fuga eaque sit aliquam nemo. Recusandae voluptatibus excepturi, voluptates
                inventore nulla aliquid porro a asperiores beatae quas quo incidunt at, cumque minima officiis error
                eius dignissimos animi ullam unde odit! Nobis aut animi quibusdam molestias libero, facere vel cum
                atque incidunt esse! Libero ipsam praesentium sit, enim corrupti quia nobis obcaecati nostrum
                voluptatem totam nulla delectus ipsa facilis optio quis iure unde repudiandae voluptas temporibus, ad
                veritatis dolorem, culpa maiores. Dicta, quod neque.</p>
            </div>
          </div>
          <div class="tab_wrap" style="display: none;">
            <div class="title">Επισύναψη αρχείων</div>
            <div class="tab_content">
              <form action="/user-menu/request?_method=POST" method="POST" class="row g-3">
                <div class="col-12">
                  <label for="inputEmail4" class="form-label">ΠΑΡΑΒΟΛΟ</label>
                  <input type="file" id="parabolo" name="parabolo" accept="image/*" />
                </div>
                <div class="col-12">
                  <label for="inputEmail4" class="form-label">ΤΑΥΤΟΤΗΤΑ</label>
                  <input type="file" id="passport" name="id" accept="image/*" />
                </div>
                <div class="col-12">
                  <label for="inputEmail4" class="form-label">ΠΤΥΧΙΟ</label>
                  <input type="file" id="ptyxio" name="diploma" accept="image/*" />
                </div>
                  <button class="btn btn-primary" id="temp-save-upload">Προσωρινή αποθήκευση</button>
                </div> 
                <div class="col-10">
                  <button type="submit" class="btn-warning btn-primary">Οριστική Υποβολή</button>
                </div>
              </form>
            </div>
          </div>
          <div class="tab_wrap" style="display: none;">
            <div class="title">Smart Phone</div>
            <div class="tab_content">
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quidem inventore perspiciatis alias, magni
                provident nulla recusandae odio consequatur praesentium officia non voluptate voluptatum debitis
                consequuntur omnis incidunt fuga eaque sit aliquam nemo. Recusandae voluptatibus excepturi, voluptates
                inventore nulla aliquid porro a asperiores beatae quas quo incidunt at, cumque minima officiis error
                eius dignissimos animi ullam unde odit! Nobis aut animi quibusdam molestias libero, facere vel cum
                atque incidunt esse! Libero ipsam praesentium sit, enim corrupti quia nobis obcaecati nostrum
                voluptatem totam nulla delectus ipsa facilis optio quis iure unde repudiandae voluptas temporibus, ad
                veritatis dolorem, culpa maiores. Dicta, quod neque.</p>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quidem inventore perspiciatis alias, magni
                provident nulla recusandae odio consequatur praesentium officia non voluptate voluptatum debitis
                consequuntur omnis incidunt fuga eaque sit aliquam nemo. Recusandae voluptatibus excepturi, voluptates
                inventore nulla aliquid porro a asperiores beatae quas quo incidunt at, cumque minima officiis error
                eius dignissimos animi ullam unde odit! Nobis aut animi quibusdam molestias libero, facere vel cum
                atque incidunt esse! Libero ipsam praesentium sit, enim corrupti quia nobis obcaecati nostrum
                voluptatem totam nulla delectus ipsa facilis optio quis iure unde repudiandae voluptas temporibus, ad
                veritatis dolorem, culpa maiores. Dicta, quod neque.</p>
            </div>
          </div>
        </div> 
      </div>

    

      <%- include ('../partials/footer.ejs') %>

        <script>
          var tabs = document.querySelectorAll(".tabs ul li");
          var tab_wraps = document.querySelectorAll(".tab_wrap");

          tabs.forEach(function (tab, tab_index) {
            tab.addEventListener("click", function () {
              tabs.forEach(function (tab) {
                tab.classList.remove("active");
              })
              tab.classList.add("active");

              tab_wraps.forEach(function (content, content_index) {
                if (content_index == tab_index) {
                  content.style.display = "block";
                }
                else {
                  content.style.display = "none";
                }
              })

            })
          })


          let request = {
            country: "",
            university: "",
            degree: "",
            title: ""
          }

          const countryId = document.getElementById("country")
          const universityId = document.getElementById("univ")
          const degreeId = document.getElementById("degree")
          const titleId = document.getElementById("title")

          const tempSave = document.getElementById("temp-save")

          tempSave.onclick = function () {
            event.preventDefault()

            const countryValue = countryId.value;
            const universityValue = universityId.value;
            const degreeValue = degreeId.value;
            const titleValue = titleId.value;

            request.country = countryValue
            request.university = universityValue
            request.degree = degreeValue
            request.title = titleValue

            localStorage.setItem('request', JSON.stringify(request))
          };

          // let fileUpload = {
          //   parabolo: "",
          //   passport: "",
          //   ptyxio: ""
          // }

          // const parabolo = document.getElementById("parabolo")
          // const passport = document.getElementById("passport")
          // const ptyxio = document.getElementById("ptyxio")
          // const tempSaveUpload = document.getElementById("temp-save-upload")

          // tempSaveUpload.onclick = () => {
          //   const paraboloValue = parabolo.value;
          //   const passportValue = passport.value;
          //   const ptyxioValue = ptyxio.value;

          //   fileUpload.parabolo = paraboloValue
          //   fileUpload.passport = passportValue
          //   fileUpload.ptyxio = ptyxioValue

          //   localStorage.setItem('fileUpload', JSON.stringify(fileUpload))
          // }

          window.onload = function () {

            let profile = localStorage.getItem('request')
            let profileObj = JSON.parse(profile)

            if (profileObj.country != "") $('#country').val(profileObj.country);
            if (profileObj.university != "") $('#univ').val(profileObj.university);
            if (profileObj.degree != "") $('#degree').val(profileObj.degree);
            if (profileObj.title != "") $('#title').val(profileObj.title);

            // let upload = localStorage.getItem('fileUpload')
            // let fileUploadObj = JSON.parse(upload)
            // console.log(fileUploadObj)

            // if (fileUploadObj.parabolo != "") $('#parabolo').val(fileUploadObj.parabolo);
            // if (fileUploadObj.passport != "") $('#passport').val(fileUploadObj.passport);
            // if (fileUploadObj.ptyxio != "") $('#ptyxio').val(fileUploadObj.ptyxio);
          }
        </script>
</body>

</html>

-->