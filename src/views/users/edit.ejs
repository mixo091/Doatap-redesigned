<!DOCTYPE html>
<html>

<head>
    <%- include ('../partials/header.ejs') %>
    <style>
    .alert {
        padding: 20px;
        background-color: #f44336;
        color: white;
      }
      
      .closebtn {
        margin-left: 15px;
        color: white;
        font-weight: bold;
        float: right;
        font-size: 22px;
        line-height: 20px;
        cursor: pointer;
        transition: 0.3s;
      }
      
      .closebtn:hover {
        color: black;
      }
      </style>
</head>

<body>
    <%- include ('../partials/nav-bar.ejs') %>
    <%- include ('../partials/breadcrumbs.ejs') %>
    <!-- <div class="container">
        <% if (errors && errors.length > 0) { %>
            <div class="alert">
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                <%=errors %>
        </div>
        <% } %>
        
    </div> -->
    <div class="flashes">
        <% if (flashMessages) { %>
          <% if (flashMessages.success) { %>
            <div class="alert">
              <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
              <%= flashMessages.success %>
            </div>
          <% } else if (flashMessages.error) { %>
            <div class="alert alert-danger">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
              <%= flashMessages.error %>
            </div>
          <% } %>
        <% } %>
      </div>

        <div class="row top-padding bottom-padding">
            <div style="width: 30%; margin: 25px auto;">
                <h1 style="text-align: center ; font-family: 'Play' , sans-serif ; font-size: larger; color: white; margin-bottom: 5vh; ">Επεξεργασία Δεδομένων</h1>
                <% if(user.isAdmin === 0) { %>
                <form action="/user-menu/edit?_method=PUT" method="post" style="margin-bottom: 5vh;"
                    oninput='passwordConfirm.setCustomValidity(passwordConfirm.value != password.value ? "Passwords do not match." : "")'>
                <% } %>

                <% if(user.isAdmin === 1) { %>
                <form action="/admin/edit?_method=PUT" method="post" style="margin-bottom: 5vh;"
                    oninput='passwordConfirm.setCustomValidity(passwordConfirm.value != password.value ? "Passwords do not match." : "")'>
                <% } %>

                    <div class="form-group">
                        <label for="input_first_name">Όνομα</label>
                        <input type="text" class="form-control" id="input_first_name" name="first_name"
                            placeholder="Όνομα" value="<%= currentUser.first_name %>" required>
                    </div>
                    <div class="form-group">
                        <label for="input_last_name">Επίθετο</label>
                        <input type="text" class="form-control" id="input_last_name" name="last_name"
                            placeholder="Επίθετο" value="<%= currentUser.last_name %>" required>
                    </div> 
                    <div class="form-group">
                        <label for="input_telephone">Τηλέφωνο</label>
                        <input type="text" class="form-control" minlength="10" maxlength="10" id="input_telephone"
                            name="phone" placeholder="Τηλέφωνο" value="<%= currentUser.phone %>" required>
                    </div>
                    <div class="form-group">
                        <label for="input_email">Email</label>
                        <input type="email" class="form-control" id="input_email" name="email"
                            placeholder="john@doe.com" value="<%= currentUser.email %>" required>
                    </div>

                    <hr class="my-4" style="background-color:white">

                    <div class="form-group">
                        <label for="input_email">Κωδικός πρόσβασης</label>
                        <input type="password" class="form-control" id="input_password" name="password"
                            placeholder="Κωδικός πρόσβασης" required>
                    </div>
                    <div class="form-group">
                        <label for="input_password_confirm">Επιβεβαίωση Κωδικού πρόσβασης</label>
                        <input type="password" class="form-control" id="input_password_confirm"
                            name="passwordConfirm" placeholder="Κωδικός πρόσβασης" required>
                    </div>
                    <button type="submit" class="btn btn-lg btn-primary btn-block " style = " font-family: 'Play' , sans-serif ; font-size: large">Αλλαγή Δεδομένων</button>
                </form>
            </div>
        </div>
        <script src="js/nav-script.js" ></script>
        <%- include ('../partials/footer.ejs') %>
</body>
</html>